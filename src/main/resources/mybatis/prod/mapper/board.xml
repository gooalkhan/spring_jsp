<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.spring_jsp.board.BoardMapper">
    <update id="createTable">
        CREATE TABLE boardtbl (
                                  IDX int NOT NULL AUTO_INCREMENT,
                                  SUBJECT varchar(100) NOT NULL,
                                  CONTENT text NOT NULL,
                                  POSTDATE timestamp NOT NULL,
                                  LIKES int NOT NULL default 0,
                                  VIEWS int NOT NULL default 0,
                                  membertbl_ID varchar(20) NOT NULL,
                                  PRIMARY KEY (IDX),
                                  KEY fk_boardtbl_membertbl1_idx (membertbl_ID),
                                  CONSTRAINT fk_boardtbl_membertbl1 FOREIGN KEY (membertbl_ID) REFERENCES membertbl (ID)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;
    </update>

    <update id="dropTable">
        DROP TABLE IF EXISTS boardtbl;
    </update>

    <select id="boardSelect" resultType="com.example.spring_jsp.board.BoardDTO">

        select * from boardtbl;

    </select>

    <!-- 기본 boardtbl insert 구문(게시글 등록) -->

    <update id="boardInsert">

        insert into boardtbl (SUBJECT, CONTENT, POSTDATE, LIKES, VIEWS, membertbl_ID)

        values (#{subject}, #{content}, now(), 0, 0, #{membertbl_ID});

    </update>

    <!-- 기본 boardtbl update 구문(게시글 수정) -->

    <!-- 기본 boardtbl delete 구문(게시글 삭제) -->

    <delete id="boardDelete">

        delete from boardtbl where IDX = #{idx};

    </delete>

    <!-- 글 상세 정보 -->

    <select id="boardDetail" resultType="com.example.spring_jsp.board.BoardDTO">

        select * from boardtbl where IDX = #{idx};

    </select>
</mapper>