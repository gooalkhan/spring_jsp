<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.spring_jsp.member.MemberMapper">
    <select id="getAll" resultType="com.example.spring_jsp.member.MemberDTO">
        select * from membertbl;
    </select>

    <update id="save">
        insert into membertbl (ID, PW, EMAIL, NAME, JOINDATE)
        values (#{id}, #{pw}, #{email}, #{name}, now());
    </update>

    <update id="createTable">
        CREATE TABLE membertbl (
                                   ID varchar(20) NOT NULL,
                                   PW varchar(100) NOT NULL,
                                   EMAIL varchar(100) NOT NULL,
                                   HASEMAILAUTHED tinyint NOT NULL DEFAULT '0',
                                   NAME varchar(30) NOT NULL,
                                   JOINDATE timestamp NOT NULL,
                                   MODIFYDATE timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
                                   PRIMARY KEY (ID)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;
    </update>

    <update id="dropTable">
        drop table if exists membertbl;
    </update>
</mapper>